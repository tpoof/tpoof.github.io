<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CNIT 133 Homework 3 - Functions</title>
  <meta name="description" content="Assignment on JavaScript Functions">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

  <style>
    body { position: relative; }
    .sidebar {
      position: sticky;
      top: 2.5rem;
      height: calc(100vh - 80px);
      padding-top: 1rem;
      border-right: 1px solid #ddd;
    }
    .sidebar .nav-link.active {
      font-weight: bold;
      color: #0d6efd !important;
      background-color: #e9f2ff;
      border-radius: 6px;
    }
    section {
      min-height: 100vh;
      padding-top: 4rem;
      padding-bottom: 4rem;
    }
    .value-cell { background-color: #e9ecef; font-weight: bold; color: #000; text-align: right; }
    .text-end-input { text-align: right; }
    label { display: inline-block; width: 5em; }
  </style>
</head>

<body class="d-flex flex-column min-vh-100" data-bs-spy="scroll" data-bs-target="#jumpNav" data-bs-offset="80" tabindex="0">
  <!-- Top Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="/index.html">Portfolio</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="/index.html">Assignments</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Body -->
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <nav id="jumpNav" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
        <div class="nav flex-column">
          <a class="nav-link" href="#part1">Part 1</a>
          <a class="nav-link" href="#part2">Part 2</a>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-5">
        <h1 class="display-4 mb-4 text-center" style="margin-top: 60px;">CNIT 133 Homework 3 - Functions</h1>

        <!-- Part 1 -->
        <section id="part1">
          <h2 class="text-center mb-4">Student Grades</h2>
          <p class="text-muted text-center mb-4">Simple tool to calculate student final average.</p>

          <!-- Grades Form -->
          <form id="gradesForm" class="mb-3">
            <div class="row mb-3 align-items-center">
              <label for="hwAvg" class="col-sm-4 col-form-label">Homework Average</label>
              <div class="col-sm-8">
                <input type="number" class="form-control" id="hwAvg" min="0" max="100" required>
              </div>
            </div>
            <div class="row mb-3 align-items-center">
              <label for="midExam" class="col-sm-4 col-form-label">Mid-Term Exam Score</label>
              <div class="col-sm-8">
                <input type="number" class="form-control" id="midExam" min="0" max="100" required>
              </div>
            </div>
            <div class="row mb-3 align-items-center">
              <label for="finalExam" class="col-sm-4 col-form-label">Final Exam Score</label>
              <div class="col-sm-8">
                <input type="number" class="form-control" id="finalExam" min="0" max="100" required>
              </div>
            </div>
            <div class="row mb-3 align-items-center">
              <label for="participation" class="col-sm-4 col-form-label">Participation</label>
              <div class="col-sm-8">
                <input type="number" class="form-control" id="participation" min="0" max="100" required>
              </div>
            </div>

            <div class="d-flex justify-content-between mt-4">
              <button type="reset" id="clearBtn" class="btn btn-secondary">Clear</button>
              <button type="submit" id="submitBtn" class="btn btn-success">Submit</button>
            </div>
          </form>

          <!-- Output Area -->
          <div class="card">
            <div class="card-body">
              <h5 class="card-title mb-3">Results</h5>
              <textarea id="results" class="form-control" rows="5" readonly placeholder="Final average and letter grade will appear here."></textarea>
              <div id="errorMsg" class="alert alert-danger mt-3 d-none" role="alert"></div>
            </div>
          </div>
        </section>

        <!-- Part 2 -->
        <section id="part2">
          <h2 class="mb-4 text-center">Sales Commission Calculator</h2>

          <div class="card mb-3">
            <div class="card-body">
              <p class="text-muted mb-3">A salesperson earns a base of $250/week plus 9% of gross weekly sales.</p>

              <div id="p2Error" class="alert alert-danger d-none" role="alert"></div>

              <form id="salesForm" novalidate>
                <div class="row mb-3 align-items-center">
                  <label for="sellerName" class="col-sm-4 col-form-label">Seller's name:</label>
                  <div class="col-sm-8">
                    <input
                      type="text"
                      id="sellerName"
                      class="form-control"
                      title="Please make sure that the salesperson's name is spelled correctly"
                      required>
                  </div>
                </div>

                <p class="fw-semibold mb-2">For each item, type the quantity sold by the seller</p>

                <div class="row mb-2 align-items-center">
                  <label for="qty1" class="col-sm-4 col-form-label">Item 1:</label>
                  <div class="col-sm-8">
                    <input type="number" id="qty1" class="form-control text-end-input" min="0" step="1" value="0">
                  </div>
                </div>
                <div class="row mb-2 align-items-center">
                  <label for="qty2" class="col-sm-4 col-form-label">Item 2:</label>
                  <div class="col-sm-8">
                    <input type="number" id="qty2" class="form-control text-end-input" min="0" step="1" value="0">
                  </div>
                </div>
                <div class="row mb-2 align-items-center">
                  <label for="qty3" class="col-sm-4 col-form-label">Item 3:</label>
                  <div class="col-sm-8">
                    <input type="number" id="qty3" class="form-control text-end-input" min="0" step="1" value="0">
                  </div>
                </div>
                <div class="row mb-3 align-items-center">
                  <label for="qty4" class="col-sm-4 col-form-label">Item 4:</label>
                  <div class="col-sm-8">
                    <input type="number" id="qty4" class="form-control text-end-input" min="0" step="1" value="0">
                  </div>
                </div>

                <div class="d-flex justify-content-between mt-3">
                  <button type="reset" id="p2Clear" class="btn btn-secondary">Clear Form</button>
                  <button type="submit" id="p2Submit" class="btn btn-success">Submit</button>
                </div>
              </form>
            </div>
          </div>

          <!-- Results Table -->
          <div class="card">
            <div class="card-body">
              <h5 class="card-title mb-3">Sales Summary</h5>
              <div class="table-responsive">
                <table class="table table-bordered align-middle mb-3">
                  <thead class="table-light">
                    <tr>
                      <th class="text-center" style="width: 15%">Item #</th>
                      <th class="text-end"   style="width: 20%">Price</th>
                      <th class="text-end"   style="width: 25%">Qty Sold</th>
                      <th class="text-end"   style="width: 40%">Total $</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-center">1</td>
                      <td class="text-end">$20.99</td>
                      <td><input id="tQty1" class="form-control text-end-input" type="text" readonly></td>
                      <td><input id="tTot1" class="form-control text-end-input" type="text" readonly></td>
                    </tr>
                    <tr>
                      <td class="text-center">2</td>
                      <td class="text-end">$12.75</td>
                      <td><input id="tQty2" class="form-control text-end-input" type="text" readonly></td>
                      <td><input id="tTot2" class="form-control text-end-input" type="text" readonly></td>
                    </tr>
                    <tr>
                      <td class="text-center">3</td>
                      <td class="text-end">$9.95</td>
                      <td><input id="tQty3" class="form-control text-end-input" type="text" readonly></td>
                      <td><input id="tTot3" class="form-control text-end-input" type="text" readonly></td>
                    </tr>
                    <tr>
                      <td class="text-center">4</td>
                      <td class="text-end">$35.89</td>
                      <td><input id="tQty4" class="form-control text-end-input" type="text" readonly></td>
                      <td><input id="tTot4" class="form-control text-end-input" type="text" readonly></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="row g-3">
                <!-- Sold total (item count) -->
                <div class="col-md-6 d-flex align-items-center justify-content-md-end">
                  <label for="soldTotal" class="col-form-label me-2">Total items sold</label>
                </div>
                <div class="col-md-6">
                  <input id="soldTotal" class="form-control text-end-input" type="text" readonly>
                </div>

                <!-- Grand total (dollars) -->
                <div class="col-md-6 d-flex align-items-center justify-content-md-end">
                  <label for="grandTotal" class="col-form-label me-2">Total amount sold ($)</label>
                </div>
                <div class="col-md-6">
                  <input id="grandTotal" class="form-control text-end-input" type="text" readonly>
                </div>

                <!-- Weekly earnings -->
                <div class="col-md-6 d-flex align-items-center justify-content-md-end">
                  <label for="weeklyEarnings" class="col-form-label me-2">Total weekly earnings</label>
                </div>
                <div class="col-md-6">
                  <input id="weeklyEarnings" class="form-control text-end-input" type="text" readonly>
                </div>
              </div>
            </div>
          </div>
        </section>

        <div class="text-center">
          <a href="/index.html" class="btn btn-primary mt-4">‚Üê Back to Portfolio</a>
        </div>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    /* ---------- Part 1 scripts ---------- */
    function toLetter(n) {
      if (n >= 90) return "A";
      if (n >= 80) return "B";
      if (n >= 70) return "C";
      if (n >= 60) return "D";
      return "F";
    }

    $(function () {
      const $form = $("#gradesForm");
      const $results = $("#results");
      const $error = $("#errorMsg");

      function showError(msg) { $error.text(msg).removeClass("d-none"); $results.val(""); }
      function clearError() { $error.addClass("d-none").text(""); }

      $form.on("submit", function (e) {
        e.preventDefault();
        clearError();

        const vals = {
          hw: Number($("#hwAvg").val()),
          mid: Number($("#midExam").val()),
          fin: Number($("#finalExam").val()),
          part: Number($("#participation").val())
        };

        // integer 0-100 validation
        for (const n of Object.values(vals)) {
          if (!Number.isInteger(n) || n < 0 || n > 100) {
            showError("All inputs must be integers between 0 and 100.");
            return;
          }
        }

        const finalAvg = (0.5 * vals.hw) + (0.2 * vals.mid) + (0.2 * vals.fin) + (0.1 * vals.part);
        const rounded = Math.round(finalAvg);
        const letter = toLetter(rounded);

        let message = `Final Average: ${rounded}%\nLetter Grade: ${letter}`;
        if (letter === "D" || letter === "F") message += `\nStudent must retake the course.`;

        $results.hide().val(message).fadeIn(150);
      });

      $("#clearBtn").on("click", function () {
        clearError();
        $results.val("");
      });
    });

    /* ---------- Part 2 scripts ---------- */
    $(function () {
      // jQuery UI tooltip
      $("#sellerName").tooltip();

      const PRICES = [20.99, 12.75, 9.95, 35.89];
      const BASE_PAY = 250;
      const COMMISSION = 0.09;

      const $error = $("#p2Error");

      function showError(msg) { $error.text(msg).removeClass("d-none"); }
      function clearError() { $error.addClass("d-none").text(""); }
      function parseQty(v) { const n = Number(v); return Number.isInteger(n) && n >= 0 ? n : null; }

      function syncQtyMirrors() {
        $("#tQty1").val($("#qty1").val());
        $("#tQty2").val($("#qty2").val());
        $("#tQty3").val($("#qty3").val());
        $("#tQty4").val($("#qty4").val());
      }
      $("#qty1, #qty2, #qty3, #qty4").on("input", syncQtyMirrors);
      syncQtyMirrors();

      $("#salesForm").on("submit", function (e) {
        e.preventDefault();
        clearError();

        const name = $("#sellerName").val().trim();
        const q1 = parseQty($("#qty1").val());
        const q2 = parseQty($("#qty2").val());
        const q3 = parseQty($("#qty3").val());
        const q4 = parseQty($("#qty4").val());

        if (!name) { showError("Error: Seller's name is required."); return; }
        if (q1 === null || q2 === null || q3 === null || q4 === null) {
          showError("Error: Quantities must be whole numbers 0 or greater (no negatives, no decimals).");
          return;
        }

        const t1 = q1 * PRICES[0];
        const t2 = q2 * PRICES[1];
        const t3 = q3 * PRICES[2];
        const t4 = q4 * PRICES[3];

        $("#tTot1").val(t1.toFixed(2));
        $("#tTot2").val(t2.toFixed(2));
        $("#tTot3").val(t3.toFixed(2));
        $("#tTot4").val(t4.toFixed(2));

        const sold = q1 + q2 + q3 + q4;
        const grand = t1 + t2 + t3 + t4;
        const earnings = BASE_PAY + COMMISSION * grand;

        $("#soldTotal").val(sold);
        $("#grandTotal").val(grand.toFixed(2));
        $("#weeklyEarnings").val(earnings.toFixed(2));
      });

      $("#p2Clear").on("click", function () {
        clearError();
        setTimeout(() => {
          syncQtyMirrors();
          $("#tTot1, #tTot2, #tTot3, #tTot4, #soldTotal, #grandTotal, #weeklyEarnings").val("");
        }, 0);
      });
    });
  </script>
</body>
</html>

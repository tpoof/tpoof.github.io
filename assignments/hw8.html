<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homework 8 - AJAX Application</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      padding: 5px;
    }
  </style>
</head>
<body>

<h1>Homework 8 - AJAX Application</h1>
<p><a href="https://tpoof.github.io/index.html">Go back to my assignment main page</a></p>

<button type="button" onclick="loadDoc()">Get CD collection</button>

<br><br>
<table id="demo"></table>

<script>
function loadDoc() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    console.log('Status:', this.status);
    console.log('Response text (first 200 chars):', this.responseText.substring(0, 200));
    myFunction(this);
  };
  xhttp.onerror = function() {
    console.error('Request error');
  };
  xhttp.open("GET", "cd_catalog.xml");
  xhttp.send();
}

function myFunction(xml) {
  const xmlDoc = xml.responseXML;

  if (!xmlDoc) {
    console.error('responseXML is null. Likely invalid XML or wrong content-type/URL.');
    return;
  }

  const x = xmlDoc.getElementsByTagName("CD");
  let table = "<tr><th>Artist</th><th>Title</th></tr>";
  for (let i = 0; i < x.length; i++) {
    table += "<tr><td>" +
      x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
      "</td><td>" +
      x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
      "</td></tr>";
  }
  document.getElementById("demo").innerHTML = table;
}
</script>

<h2>Explanation of AJAX</h2>
<p>
  This page uses AJAX to load the CD data without reloading the entire page. When the user clicks the
  "Get CD collection" button, the browser calls the <code>loadDoc()</code> function. Inside that function,
  a new <code>XMLHttpRequest</code> object is created. This object represents an asynchronous HTTP request
  that the browser will send in the background.
</p>
<p>
  The code assigns a function to the request's <code>onload</code> handler. That handler runs automatically
  when the request finishes successfully. After that handler is in place, the code calls
  <code>open("GET", "cd_catalog.xml")</code> to configure the request and <code>send()</code> to actually
  send it to the server. When the response arrives, the browser provides an XML document as
  <code>responseXML</code>. The script reads that XML, loops through each CD entry and builds HTML table
  rows. Finally, it updates the table element on the page by setting <code>innerHTML</code>, so the user
  sees the results that were loaded asynchronously with AJAX.
</p>

<h2>REST API - Homepage Screenshot API for Luma Studios</h2>
<p>
  At Luma Studios, we often need accurate screenshots of client homepages to track design changes,
  content updates and marketing campaigns. The Homepage Screenshot API gives us
  a simple REST endpoint such as <code>https://screenshotof.com/github.com?f=json</code>. This endpoint
  returns a JSON response that includes metadata and links to the generated homepage screenshot, which we
  can easily consume from our web applications or backend services.
</p>
<p>
  The API is accessed with a standard HTTP GET request, so there is no complex authentication flow or SDK
  required for basic use. According to the service documentation, we can make up to 1,000 requests per day
  without using an API key, and the homepage API is free to use as long as we include proper attribution on
  any page where the screenshots are displayed. That combination of JSON output and no required key for
  normal usage makes it easy to prototype and integrate quickly in our existing tools.
</p>
<p>
  Another advantage for Luma Studios is flexibility. The API supports different sizes, formats and dates,
  which means we can request screenshots in various resolutions and retrieve historical homepage versions
  going back across many months. This is ideal for monitoring visual regressions, comparing A/B test
  layouts or generating visual reports for clients. Developers can find more details, usage examples and
  attribution requirements at their official site
  <a href="https://screenshotof.com">ScreenshotOf Website</a>.
  Overall, this REST API would let our team automate a time consuming manual task and make our monitoring
  workflows more reliable and repeatable.
</p>

</body>
</html>
